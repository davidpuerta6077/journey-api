<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usuarios</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/usuarios.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>

<body>

  <nav class="navbar navbar-dark bg-dark px-3">
    <button id="toggle-menu" class="btn btn-dark me-2"><i class="bi bi-list"></i></button>
    <span class="navbar-brand mb-0 h1">JOURNEY</span>
    <div class="user-menu">
      <div class="user-info" id="userDropdown">
        <span class="user-name"><i class="bi bi-person-circle"></i> Usuario</span>
        <i class="bi bi-chevron-down"></i>
      </div>

      <ul class="dropdown-menu" id="userMenu">
        <li><a href="Usuarios_sistema.html">Usuarios del sistema</a></li>
        <li><a href="Perfil.html">Mi Perfil</a></li>
        <li><a href="logs_journey.html">Ver Logs</a></li>
        <li class="logout"><a href="#">Cerrar sesión</a></li>
      </ul>
    </div>
  </nav>

  <div class="d-flex">

    <aside id="sidebar" class="sidebar">
      <ul class="nav flex-column">
        <li><a href="index.html" class="active"><i class="bi bi-house"></i> <span>Home</span></a></li>


        <li class="has-submenu">
          <a href="#" id="sync-menu">
            <i class="bi bi-arrow-repeat"></i> <span>Sincronización</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </a>
          <ul class="submenu">
            <li><a href="Ejecutar_sincronizacion.html">Ejecutar Sincronización</a></li>
            <li><a href="Historial.html">Historial</a></li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" id="sync-menu">
            <i class="bi bi-mortarboard"></i> <span>Módulos</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </a>
          <ul class="submenu">
            <li><a href="Usuarios.html">Usuarios</a></li>
            <li><a href="Cusros_Categorias.html">Cursos y categorías</a></li>
            <li><a href="Programas.html">Programas</a></li>
            <li><a href="Asignaturas.html">Asignaturas</a></li>
            <li><a href="Grupos.html">Grupos</a></li>
            <li><a href="Matriculas.html">Matrículas</a></li>
            <li><a href="Estado_matriculas.html">Estado de Matrículas</a></li>
            <li><a href="Roles_matriculas.html">Roles de Matrículas</a></li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" id="sync-menu">
            <i class="bi bi-upload"></i> <span>Carga Masiva</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </a>
          <ul class="submenu">
            <li><a href="Carga_Usuarios.html">Usuarios</a></li>
            <li><a href="Carga_Matriculas.html">Matrículas</a></li>
            <li><a href="Carga_Novedades.html">Novedades</a></li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" id="sync-menu">
            <i class="bi bi-shield-check"></i> <span>Cursos</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </a>
          <ul class="submenu">
            <li><a href="Reglas_cursos.html">Reglas Cursos</a></li>
            <li><a href="Plantillas.html">Plantillas</a></li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" id="sync-menu">
            <i class="bi bi-diagram-3"></i> <span>Integración</span>
            <i class="bi bi-chevron-down ms-auto small"></i>
          </a>
          <ul class="submenu">
            <li><a href="Estado_API.html">Estado de APIs</a></li>
          </ul>
        </li>
        <li><a href="Reportes.html"><i class="bi bi-file-earmark-text"></i> <span>Reportes</span></a></li>
        <li><a href="Estadisticas.html"><i class="bi bi-bar-chart-line"></i> <span>Estadísticas</span></a></li>
        <li><a href="Busquedas.html"><i class="bi bi-search"></i> <span>Búsqueda</span></a></li>
        <li><a href="Configuracion.html"><i class="bi bi-gear"></i> <span>Configuración</span></a></li>
      </ul>
    </aside>

    <main class="container-fluid px-4 py-4">
      <h4 class="mb-4">Usuarios</h4>

      <div class="row mb-4 align-items-center">
  <div class="col-md-6">
    <div class="input-group search-bar rounded-3">
      <span class="input-group-text bg-white border-0"><i class="bi bi-search"></i></span>
      <!-- Ya tiene ID globalSearch, está bien -->
      <input type="text" class="form-control border-0 bg-light" placeholder="Buscar por apellido, nombre o correo..." id="globalSearch">
    </div>
  </div>
  <!-- Botones (sin cambios) -->
  <div class="col-md-6 text-end">
    <button class="btn btn-outline-secondary me-2 custom-btn-outline">Nuevo usuario del sistema <i class="bi bi-plus-lg ms-2"></i></button>
    <button class="btn btn-outline-primary custom-btn-outline" data-bs-toggle="modal" data-bs-target="#modalNuevoUsuario">Nuevo usuario plataforma <i class="bi bi-plus-lg ms-2"></i></button>
  </div>
</div>

<!-- Stats Cards (AGREGADOS LOS IDs) -->
<div class="row g-3 mb-4">
  <div class="col-md-3">
    <div class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded">
      <div>Total de usuarios</div>
      <h3 class="fs-4 text-muted" id="statTotal">0</h3>
    </div>
  </div>
  <div class="col-md-3">
    <div class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded">
      <div>Activos</div>
      <h3 class="fs-4 text-success" id="statActive">0</h3>
    </div>
  </div>
  <div class="col-md-2">
    <div class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded">
      <div>Suspendidos</div> 
      <h3 class="fs-4 text-danger" id="statSuspended">0</h3>
    </div>
  </div>
  <div class="col-md-4">
    <div class="p-3 bg-white shadow-sm d-flex justify-content-between align-items-center rounded">
      <div>Usuarios sistema</div>
      <h3 class="fs-4 text-secondary" id="statSystem">0</h3>
    </div>
  </div>
</div>

   <div class="bg-white rounded shadow-sm">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0" id="usersTable">
      <thead class="table-light">
  <tr>
    <th scope="col" style="cursor: pointer;" onclick="sortUsers('id')">
      ID <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
    </th>
    <th scope="col" style="cursor: pointer;" onclick="sortUsers('firstname')">
      Nombres <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
    </th>
    <th scope="col" style="cursor: pointer;" onclick="sortUsers('lastname')">
      Apellidos <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
    </th>
    <th scope="col" style="cursor: pointer;" onclick="sortUsers('email')">
      Correo Inst. <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
    </th>
    <th scope="col">Documento</th>
   
    <th scope="col">Celular</th>

  
    <th scope="col" style="cursor: pointer;" onclick="sortUsers('suspended')">
        Estado <i class="bi bi-arrow-down-up ms-1 text-muted"></i>
    </th>

    <th scope="col" class="text-end" style="width: 150px;">Acciones</th>
  </tr>
</thead>
      <tbody>
       
      </tbody>
    </table>
  </div>
</div>


 <!-- Modal Nuevo Usuario Plataforma -->
<div class="modal fade" id="modalNuevoUsuario" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header text-white" style="background-color: #524e7a;">
        <h5 class="modal-title fw-bold" id="modalLabel">Nuevo usuario plataforma</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <form id="formAddUser">

          <div class="row g-4">

            <div class="col-md-6">
              <label class="form-label">Nombres</label>
              <input type="text" class="form-control form-custom" name="firstname" required>
            </div>

            <div class="col-md-6">
              <label class="form-label">Apellidos</label>
              <input type="text" class="form-control form-custom" name="lastname" required>
            </div>

            <div class="col-md-6">
              <label class="form-label">Documento</label>
              <!-- Cambiado name="username" a name="document" para ser claros -->
              <input type="text" class="form-control form-custom" name="document" required>
              <small class="text-muted" style="font-size: 0.7em;">Será la contraseña</small>
            </div>

            <div class="col-md-6">
              <label class="form-label">Correo institucional</label>
              <input type="email" class="form-control form-custom" name="email" required>
              <small class="text-muted" style="font-size: 0.7em;">Será el usuario en Moodle</small>
            </div>

            <div class="col-md-6">
              <label class="form-label">Ciudad</label>
              <input type="text" class="form-control form-custom" name="city" placeholder="Medellín">
            </div>

            <div class="col-md-6">
              <label class="form-label">País</label>
              <input type="text" class="form-control form-custom" name="country" placeholder="CO">
            </div>

          </div>

          <div class="text-end mt-4">
            <button type="submit" class="btn btn-custom-save px-4">
                Guardar usuario <i class="bi bi-save ms-2"></i>
            </button>
          </div>

        </form>

      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Script de Lógica -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <script src="./js/script.js"></script>
  <script src="./js/Usuarios.js"></script>
</body>

</html>